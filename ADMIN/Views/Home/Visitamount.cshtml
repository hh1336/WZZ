
@section Styles{
    <style>
        .jinsantian > div {
            padding-top: 2%;
            background: #ffffff;
            text-align: center;
        }

            .jinsantian > div > h1 {
                margin-top: 10%;
                margin-bottom: 10%;
            }
    </style>
}
@{
    //获取当前月时间
    int monthDay = DateTime.DaysInMonth(DateTime.Now.Year, DateTime.Now.Month);

    DateTime monthstart = new DateTime(DateTime.Now.Year, DateTime.Now.Month, 1);
    DateTime monthend = new DateTime(DateTime.Now.Year, DateTime.Now.Month, monthDay);
}
<div class="row">
    <div class="col-lg-12">
        <div class="col-12">
            <div class="layui-form">
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label" style="padding:3% 0 0 0;">开始时间：</label>
                        <div class="layui-input-inline">
                            <input type="text" class="layui-input" id="startTime" placeholder="yyyy-MM-dd">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label" style="padding:3% 0 0 0;">结束时间：</label>
                        <div class="layui-input-inline">
                            <input type="text" class="layui-input" id="endTime" placeholder="yyyy-MM-dd">
                        </div>
                    </div>
                    <input type="button" class="layui-btn" value="查看" />
                </div>
            </div>
            <hr class="layui-bg-blue">
        </div>
    </div>

    <div class="col-lg-12 jinsantian">
        <div class="col-lg-3">
            <h3>今日浏览</h3>
            <h1>13</h1>
        </div>
        <div class="col-lg-3 col-lg-offset-1">
            <h3>本周总浏览</h3>
            <h1>13</h1>
        </div>
        <div class="col-lg-3 col-lg-offset-1">
            <h3>本月总浏览</h3>
            <h1>13</h1>
        </div>
    </div>
    <div class="col-lg-12">
        <div id="echart" class="col-lg-12" style="height:500px;"></div>
    </div>
</div>

@section Scripts{

    <script src="~/lib/echarts/echarts.common.min.js"></script>

    <script>

        var _startTime =" @monthstart.ToString("yyyy-MM-dd") ";
        var _endTime =" @monthend.ToString("yyyy-MM-dd") ";
        function loadChart(starttime, endtime) {
            //初始化
            var myChart = echarts.init(document.getElementById('echart'));

            // 使用刚指定的配置项和数据显示图表。
            myChart.setOption({
                title: {
                    text: '本月浏览情况'
                },
                tooltip: {},
                legend: {
                    data: ['访问量']
                },
                xAxis: {
                    data: []
                },
                yAxis: {},
                series: [{
                    name: '访问量',
                    type: 'bar',
                    data: []
                }]
            });
            var data = {
                startTime: starttime,
                endtime: endtime
            };
            $.post("/Home/GetVisitamount", data, function (result) {
                console.log(result);
                myChart.setOption({
                    xAxis: {
                        data: result.categories
                    },
                    series: [{
                        // 根据名字对应到相应的系列
                        name: '销量',
                        data: result.data
                    }]
                });
            })

        }



        $(function () {
            //初始化时间
            var layerdate = layui.laydate;
            layerdate.render({
                elem: "#startTime"
            })
            layerdate.render({
                elem: "#endTime"
            })

            loadChart(_startTime,_endTime);


        })

    </script>
}